const crypto = require('crypto-js')
Ts = "jsjiami.com.v7";

function Qs() {
    const t = {
        NDbhk: "ACkfnmkAWOnjWQdcJa",
        SkByf: "W412WPFcNMrfgCkQW7C",
        lvqRK: "DWRjpVpsCjnlhiVXaIfPmKiQqA.rcJHqoLmkE.v7==",
        wgNii: "WO1yWOS/W4W",
        vaXrx: "W7JcSmkAWRFdSq",
        jxRcW: "eSo/WPvtud9rwvvptmotDSkspcnYx8o6nCoRWPBdP8oEWR3cPWBdLCoUW5ZcV8kulSosvvT6lmorAaVcMmoivhhcOga3W5JcKwVdUW",
        yMXgR: "zmo9gSoFba",
        mGHyG: "r8owl8ozf8kBs8oPbG",
        WsFbo: function (e) {
            return e();
        }
    };
    var n = function () {
        const s = {
            QEVOG: "WO1ZWPiuW4PTpSoH",
            OpIIh: t["NDbhk"],
            TEAre: "m8ovfSoqWPhcVSolWRiCWR0Q",
            LrRDM: "jgJcQu7dIq",
            aqqPt: "Auy7WOhcNSkxbI7dTSkkW4pdGSk7WR0ab8kLWOahWQJdK3VcGSokW4iOWRPZWPr1W5tcSL7cV8oCr8kNWONdTv3cOI/dQSoLWPBcNmoToG5EumoW",
            rDmMQ: "W49YWO/cKhDm",
            gikuE: t.SkByf
        };
        return [Ts, t.lvqRK, "W59QvSk2EW", "qmkowSk7W40", "nbNdGNtcOWKCzmoRWOf/ymoIcmooWOdcPc3cMsFcRCoKWQJcKb0FumonW77dT0FcRCk0W4acWPGYW7LiW4H2W5ldOMZcT2eIWQ3dMmoCWOtdJwmOWQhdJc8KWQZdVYpdRKXn", "W6ldG17dOxK", "yCkltSkAW6lcNW", t["wgNii"], t.vaXrx, "WRZdTW3dSWddMSoAWQvPWOf3dSoyn8koW4LQ", "tN8lWQlcQCkGlq", t.jxRcW, "WR7dTZtcGa", t.yMXgR, "WPVcM8okBCkfcwu", "uCkylSknWRm", "DComWOBcI14", "dbtcL0fZ", "oM59WRfx", "uvNdVJ3cSa", "e8osWPDzEa", "nmo1WRVdUZRdJWZcM8ol", "b0SXWQ7cJSoMW6ncW58", "WRRcMvzYWPhcOZxcLINcH2tdIImU", "ggqBWPPkFXz8bKbtWOi", "uCkKeCkCWRm", "WQKGfYZcNq", "g2mDW78sicLYfW", "W4xcTSkmWPFdJW", "WRHLAZv3", "FuuZWPdcMmkx", t.mGHyG, "WPiNW5hdHderxSoXW63dK8o5WQ7dIeS", "WO1YnmkOEW", "WPBdL8o9W7lcNW", "W4BcUZhcISkH", "WO1Pkmkazr0PrhyaA8ovySkvFCohzmkOWQNdNHJdH8kXuSkvW6xcNgKaW5NdNIBcTaXSktiqdmkNEqFdHCk6kSoRW6tdTmkcqs8d", "wtP6W50ojWb5", "W6lcT8kmWPVdSmkI", "WP0Sa8oNpxixW7hdOH3cOG", "WQNdLrJdIH4", ...function () {
            return ["WRFcG8o8WQnW", "W7Khh8kPWPpcRmopW6pdLCkIc8kEW7VdTG", "WRTBbdfxu3ddKa", "amoWWQmtgG", "WRZdIbNdKaq", "E8obe8o/gW", "egGu", "hG/dIxTHWO4", "W5JdUuldUxy", "uaZcM8kuEW", "fmoqWPnBAq", "WQBdRtVcMmkMhcmC", "BCotW6WdW7y", s["LrRDM"], "xdtcPmk9va", "n8oGWOtdRX4", "WRjzysTw", "WPX8l8k7Ba", "uCoOWOmvW7L5odCTrG", "W77cHW/cQ8kD", s["aqqPt"], s["rDmMQ"], "WQZcISodWQzA", s["gikuE"], "w8oYWOFcRh8", "h8ouWO8zaW", "lmomWOJdPdm", "qCotWQRcH0G", "dCoIxb3cObddJCon", "BCkbrCknW4dcNW", "W7Kbh8orW6BdJmkxWRRdOq", "WPP3mSkqua", "hKfxWP5P", "hSoYWPnfCIe", "hSozWOJdNd7dTZy", "naj+WQpcMG", "ja5+WRNcQXHW", "WQRcINqOza", "WOBcGK47sqldLq", "W5BdJbZcQ8ow", "hMaBWPTnEYLueu1NWOe", ...function () {
                return ["W6BcQSk3WRFdVsuJztznW4JcMW", s["QEVOG"], "W5H1ACkRFu4qW6m", "rrjjWPFcL8oTW5zTW73dQSkq", "W7ZdPN/dQgC", "WQ/dTG/cNmkQ", "WPjUesjs", "mmoxW4tcRmkf", "d8oBWO8tlCkC", "W7v8uCkxsG", s["OpIIh"], "WPrtWQKhW7O", "WRPLfXX6", "WRJcNfrZWPlcO0hdQatcUxFdKa", "lSk9WPPZ", "W6xdOqmVW6G", "W4TYrgdcOa", "WRJdRc7cUCk5", "qCoSWOSeW58", "W7DLWPJcGuC", "W7nAq03cTW", "jhdcSKtdGSoZ", "WRhdPW7cKIe", "WONcO8kDA8khr2BcImowCSkZWQRdVIBdS8kLWP7dVflcKtJcNCoCW60LzmkOW4TijSk/kSosW5/cGCkgW7r6FmkMrH3dLCkntwFcOCkHWOVcUCkyW6KKWRZcSxddVmkioCoqW7ldKmo0WOxdKW", "WR4DWQJcQftcPuJdICkNAW", "jCkOWOrDWRncWRBdSCo6W5JcRMin", "amk4W5nsWOXEjHCGDSkm", "lmoNWQ4", s["TEAre"], "W497vSkZ", "WQjBiIPs", "sSkBjCk2WRS", "amkkWPXvW40", "swuyW5/dNN4DlSogW5NdQmomWQ4", "W4WJASoppYq/D1K1AW", "crjpWR/cMq", "WO/dVIZcVmkj", "WRFdPZ3cQYy", "sSk7pfNdOu/cL8kAW59yWP/dGfTI"];
            }()];
        }()];
    }();
    return t.WsFbo(Qs = function () {
        return n;
    });
}

(function (e, t, n, s, o, a, i) {
    const c = {
        kedie: function (e, t) {
            return e / t;
        },
        szohL: "soEi",
        kBVYW: function (e, t, n) {
            return e(t, n);
        },
        TfZxr: function (e, t, n) {
            return e(t, n);
        },
        XMFJW: "iNMi",
        VkhEo: function (e, t) {
            return e(t);
        },
        RiUgc: function (e, t) {
            return e === t;
        }
    };
    e >>= 3, a = "hs", i = "hs", function (t, n, r, u, d) {
        var m = Bs;
        u = "tfi", i += d = "up", a = r(a = u + a), i = r(i), r = 0;
        for (var f = t(); --s + n;) try {
            u = c["kedie"](-parseInt(m(399, c["szohL"])), 1) + -parseInt("2403092SnWMkk") / 2 + parseInt("303HFVliD") / 3 * (parseInt(c["kBVYW"](m, 372, "nH]K")) / 4) + -parseInt("352215GJEwbR") / 5 * (parseInt(c["TfZxr"](m, 427, "QmcG")) / 6) + parseInt(m(414, c["XMFJW"])) / 7 * (parseInt(m(402, c["szohL"])) / 8) + -c["VkhEo"](parseInt, "10032534hIqHnS") / 9 + parseInt("36303640pnEUdj") / 10;
        } catch (h) {
            u = r;
        } finally {
            if (d = f[a](), e <= s) r ? o ? u = d : o = d : r = d; else if (r == o["replace"](/[PhHCfWLlKkXQqnpDJARVrIE=]/g, "")) {
                if (c.RiUgc(u, n)) {
                    f["un" + a](d);
                    break;
                }
                f[i](d);
            }
        }
    }(n, 657383, function (e, t, n, s, o, a, i) {
        return t = "split", (e = (e = (e = arguments[0])[t](""))[n = "reverse"]("v"))[s = "join"]("");
    });
})(1600, 0, Qs, 202), Qs && (Ts = Qs);

function Bs(e, t) {
    const s = {
        VcOBw: "0|2|4|3|1",
        WnLRe: "charCodeAt",
        kJCkX: function (e, t) {
            return e % t;
        }
    };
    var o = Qs();
    return Bs = function (t, a) {
        var l = o[t -= 366];
        if (void 0 === Bs["ZjnfhJ"]) {
            var r = function (e) {
                    const n = s["VcOBw"]["split"]("|");
                    let o = 0;
                    for (; ;) {
                        switch (n[o++]) {
                            case "0":
                                var a = "abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ0123456789+/=";
                                continue;
                            case "1":
                                return decodeURIComponent(r);
                            case "2":
                                var l = "",
                                    r = "";
                                continue;
                            case "3":
                                for (var c = 0, u = l.length; c < u; c++) r += "%" + ("00" + l[s["WnLRe"]](c)["toString"](16))["slice"](-2);
                                continue;
                            case "4":
                                for (var d, p, m = 0, f = 0; p = e.charAt(f++); ~p && (d = s["kJCkX"](m, 4) ? 64 * d + p : p, m++ % 4) ? l += String["fromCharCode"](255 & d >> (-2 * m & 6)) : 0) p = a["indexOf"](p);
                                continue;
                        }
                        break;
                    }
                },
                c = function (e, t) {
                    var s,
                        o,
                        a = [],
                        l = 0,
                        c = "";
                    for (e = r(e), o = 0; o < 256; o++) a[o] = o;
                    for (o = 0; o < 256; o++) l = (l + a[o] + t.charCodeAt(o % t.length)) % 256, s = a[o], a[o] = a[l], a[l] = s;
                    o = 0, l = 0;
                    for (var u = 0; u < e["length"]; u++) l = (l + a[o = (o + 1) % 256]) % 256, s = a[o], a[o] = a[l], a[l] = s, c += String["fromCharCode"](e.charCodeAt(u) ^ a[(a[o] + a[l]) % 256]);
                    return c;
                };
            Bs.VLUNch = c, e = arguments, Bs.ZjnfhJ = !0;
        }
        var u = o[0],
            d = t + u,
            p = e[d];
        return p ? l = p : (void 0 === Bs["oIHThw"] && (Bs["oIHThw"] = !0), l = Bs["VLUNch"](l, a), e[d] = l), l;
    }, Bs(e, t);
}

Ms = Bs
//======================================================================================================================================
var As = "pW8jg/mke6cO1F4CTuaiswhZfQGzMyq5NJRLPVIvDxlA7=E3YrSUoH0b2BXKn9td+"

function Vs(e) {
    const n = {
        tuAHo: function (e, t) {
            return e << t;
        },
        fYxWD: function (e, t) {
            return e & t;
        },
        GobpX: function (e, t) {
            return e % t;
        },
        HfVUW: function (e, t, n) {
            return e(t, n);
        },
        CxxeS: function (e, t, n) {
            return e(t, n);
        },
        GBnnb: "4tD(",
        Knpuc: "17n]"
    };
    var s,
        o,
        a,
        i,
        l,
        c,
        u,
        d,
        p = Ms,
        m = {
            bgtAe: function (e, t) {
                return e !== t;
            },
            HPrAi: "OSVOt",
            UvJUa: "0|6|2|4|7|5|1|8|3",
            lBwln: function (e, t) {
                return e >> t;
            },
            TjpAy: function (e, t) {
                return e + t;
            },
            GVZtk: function (e, t) {
                return e + t;
            },
            PhnhP: function (e, t) {
                return e | t;
            },
            txWRb: function (e, t) {
                return e << t;
            },
            dlijY: function (e, t) {
                return n.tuAHo(e, t);
            },
            iJalZ: function (e, s) {
                return n["fYxWD"](e, s);
            },
            PUIzj: function (e, t) {
                return e & t;
            },
            kCBJn: function (e, s) {
                return n["GobpX"](e, s);
            },
            oYAvf: function (e, t) {
                return e - t;
            },
            lPeqS: "===",
            OcODS: function (e, t) {
                return e || t;
            }
        },
        f = 0,
        h = "";
    do {
        for (var y = m["UvJUa"]["split"]("|"), g = 0; ;) {
            switch (y[g++]) {
                case "0":
                    s = e[f++];
                    continue;
                case "1":
                    c = 63 & m["lBwln"](d, 6);
                    continue;
                case "2":
                    a = e[f++];
                    continue;
                case "3":
                    h += m[n.HfVUW(p, 438, "h#AG")](m.GVZtk(As[n["HfVUW"](p, 449, "kGzc")](i), As["charAt"](l)), As["charAt"](c)) + As["charAt"](u);
                    continue;
                case "4":
                    d = m["PhnhP"](m["txWRb"](s, 16), m[n.HfVUW(p, 447, "nH]K")](o, 8)) | a;
                    continue;
                case "5":
                    l = m[n["CxxeS"](p, 426, "kGzc")](m[n["HfVUW"](p, 473, "FEW&")](d, 12), 63);
                    continue;
                case "6":
                    o = e[f++];
                    continue;
                case "7":
                    i = m["PUIzj"](d >> 18, 63);
                    continue;
                case "8":
                    u = m["iJalZ"](d, 63);
                    continue;
            }
            break;
        }
    } while (f < e.length)
    var v = e["length"] % 3
    return (v ? h.slice(0, v - 3) : h) + "===".slice(v || 3);
}


function Hs(e, t) {
    const s = {
        SYJBc: function (e, t) {
            return e % t;
        }
    };
    var a = {
        ELxvT: function (e, t) {
            return s["SYJBc"](e, t);
        }
    };
    return e["charCodeAt"](Math["floor"](a["ELxvT"](t, e["length"])));
}

function Us(e, t) {
    const s = {
        TzRXW: "nH]K",
        qbSXn: "Ase2",
        ufZJU: function (e, t, n) {
            return e(t, n);
        },
        HKgOn: "NaeJ",
        dQUtJ: function (e, t, n) {
            return e(t, n);
        },
        tbRos: "navigator",
        VVaGL: "e$GE",
        aUzch: ")O3J"
    };
    var o = Ms,
        a = {
            OqrML: function (e, t, n) {
                return e(t, n);
            },
            mnxHn: function (e, t) {
                return e - t;
            },
            RvJOk: function (e, t) {
                return e ^ t;
            },
            oJkDI: function (e, t) {
                return e + t;
            },
            YfkHE: function (e, t) {
                return e(t);
            },
            BmuSn: function (e, t) {
                return e === t;
            },
            wXjod: o(408, s.TzRXW),
            lCMrv: "mQpLY",
            nHenK: function (e, t) {
                return e !== t;
            },
            sWlFh: function (e, t) {
                return e(t);
            },
            WHKWQ: function (e, t) {
                return e === t;
            }
        },
        i = t["split"]("")
    return i['map'](function (t, s) {
        return t.charCodeAt(0) ^ Hs(e, s)
    });
}

Es = {
    encode: function (e, t) {
        t = 'yGz4n9XE9xYy2Oj5Ub7E6u9a5p5aIWZYe53Orq5wE5UgnjbWq0410WTvmLBO1Z2N'
        var i = Us(t["toString"](), e["toString"]())
        console.log(Vs(i))
        return '20230327.' + crypto.MD5(Vs(i))
    }
}

function main_(text, page) {
    data = {type: 'YQM', text: text, page: page, v: 'beta', _t: Date.now()}
    data['token'] = Es.encode(encodeURIComponent(JSON["stringify"](data)))
    return data
}

function main__(id, quality) {
    data = {id: id, quality: quality.toString(), _t: Date.now().toString()}
    data['token'] = Es.encode(encodeURIComponent(JSON["stringify"](data)))
    return data
}